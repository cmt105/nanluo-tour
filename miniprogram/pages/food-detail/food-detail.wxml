<!-- pages/food-detail/food-detail.wxml -->
<view class="detail-container">
  <!-- 1. ç¾é£Ÿä¸»å›¾ -->
  <image 
    class="food-main-img" 
    src="{{foodDetail.foodImg}}" 
    mode="widthFix"
    lazy-load="true"
    fallback-src="/images/default-food.png"
  />

  <!-- 2. ç¾é£ŸåŸºç¡€ä¿¡æ¯ï¼ˆä»·æ ¼å³ç§»ï¼‰ -->
  <view class="food-base-wrap">
    <view class="food-name-price">
      <text class="food-name">{{foodDetail.foodName || 'æœªçŸ¥ç¾é£Ÿ'}}</text>
      <!-- ä»·æ ¼å•ç‹¬å³ç§»å®¹å™¨ -->
      <view class="price-right">
        <text class="food-price">{{foodDetail.foodPrice || 'Â¥0.00'}}</text>
      </view>
    </view>
    <view class="food-score-sales">
      <text class="score-star">â˜…</text>
      <text class="score-num">{{foodDetail.foodScore || '0.0'}}</text>
      <text class="score-tag">è€å­—å·</text>
      <text class="sales-num">{{foodDetail.sales || 'æœˆå”® 0'}}</text>
    </view>
    <view class="food-tags">
      <text class="tag-item">{{foodDetail.foodType || 'æœªåˆ†ç±»'}}</text>
      <text class="tag-item">{{foodDetail.foodTag || 'æ— æ ‡ç­¾'}}</text>
      <text class="tag-item">æ‹›ç‰Œèœ</text>
    </view>
  </view>

  <!-- 3. çƒ¹é¥ªä¿¡æ¯ï¼ˆå­—ä½“æ”¾å¤§ï¼‰ -->
  <view class="cook-info-wrap">
    <view class="cook-item">
      <text class="cook-icon">âŒ›</text>
      <text class="cook-text">åˆ¶ä½œæ—¶é—´: {{foodDetail.cookTime || 'çº¦20åˆ†é’Ÿ'}}</text>
    </view>
    <view class="cook-item">
      <text class="cook-icon">ğŸ‘¥</text>
      <text class="cook-text">å»ºè®®{{foodDetail.suggestedPeople || '1äºº'}}é£Ÿç”¨</text>
    </view>
    <view class="cook-item">
      <text class="cook-icon">ğŸŒ¶ï¸</text>
      <text class="cook-text">{{foodDetail.flavor || 'åŸå‘³'}}</text>
    </view>
  </view>

  <!-- 4. å•†å®¶ä¿¡æ¯å¡ç‰‡ -->
  <view class="merchant-card">
    <text class="card-title">å•†å®¶ä¿¡æ¯</text>
    <view class="merchant-item">
      <text class="item-icon">ğŸ“</text>
      <text class="item-content">{{foodDetail.foodAddr || 'æš‚æ— è¯¦ç»†åœ°å€'}}</text>
      <text class="arrow">></text>
    </view>
    <view class="merchant-item">
      <text class="item-icon">ğŸ“</text>
      <text class="item-content">{{foodDetail.foodTel || 'æš‚æ— è”ç³»ç”µè¯'}}</text>
      <text class="arrow">></text>
    </view>
    <view class="merchant-item">
      <text class="item-icon">â°</text>
      <text class="item-content">{{foodDetail.businessTime || '09:00-22:00'}}</text>
      <text class="arrow">></text>
    </view>
  </view>

  <!-- 5. ç¾é£Ÿè¯¦æƒ…æè¿° -->
  <view class="desc-section">
    <text class="section-title">ç¾é£Ÿè¯¦æƒ…</text>
    <text class="desc-content">{{foodDetail.foodDesc || 'æš‚æ— è¯¥ç¾é£Ÿçš„è¯¦ç»†ä»‹ç»ï¼Œæ•¬è¯·æœŸå¾…~'}}</text>
  </view>

  <!-- 6. ç”¨æˆ·è¯„ä»·æ¨¡å— -->
  <view class="comment-section">
    <text class="section-title">ç”¨æˆ·è¯„ä»·ï¼ˆ{{commentList.length}}ï¼‰</text>
    <view class="empty-comment" wx:if="{{commentList.length === 0}}">
      æš‚æ— ç”¨æˆ·è¯„ä»·ï¼Œå¿«æ¥æˆä¸ºç¬¬ä¸€ä¸ªåˆ†äº«ä½“éªŒçš„äººå§~
    </view>
    <view class="comment-item" wx:for="{{commentList}}" wx:key="_id">
      <image 
        class="user-avatar" 
        src="{{item.userAvatar}}" 
        mode="widthFix"
        fallback-src="/images/default-avatar.png"
      />
      <view class="comment-content">
        <view class="comment-top">
          <text class="user-name">{{item.userName || 'åŒ¿åç”¨æˆ·'}}</text>
          <text class="comment-star">â˜…{{item.score || '5.0'}}</text>
          <text class="comment-time">{{item.commentTime || 'æœªçŸ¥æ—¶é—´'}}</text>
        </view>
        <text class="comment-text">{{item.commentText || 'ç”¨æˆ·æœªå¡«å†™è¯„ä»·å†…å®¹'}}</text>
        <image 
          class="comment-img" 
          src="{{item.commentImg}}" 
          mode="widthFix"
          wx:if="{{item.commentImg}}"
          fallback-src="/images/default-comment.png"
        />
      </view>
    </view>
  </view>

  <!-- 7. åº•éƒ¨æŒ‰é’®ï¼ˆåˆ†äº«åœ¨å·¦ï¼Œé¢„è®¢åœ¨å³ï¼‰ -->
  <view class="bottom-btn-group">
    <button class="share-btn" bindtap="onShareTap">
      <text class="share-icon">ğŸ“¤</text>
      <text class="share-text">åˆ†äº«</text>
    </button>
    <button class="book-btn" bindtap="onBookTap">ç«‹å³é¢„è®¢</button>
  </view>
</view>